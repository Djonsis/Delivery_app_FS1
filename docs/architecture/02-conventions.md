# üèó Code Conventions v2.0

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–ª—é—á–µ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–æ–¥–∞. –¶–µ–ª—å ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –≤—ã—Å–æ–∫–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞, –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –∏ —Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–º—É –≤–∏–¥–µ–Ω–∏—é –ø—Ä–æ–µ–∫—Ç–∞, –æ–ø–∏—Å–∞–Ω–Ω–æ–º—É –≤ `docs/architecture/01-vision.md`.

## üî• –û–±—â–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1. **–°–ª–µ–¥–æ–≤–∞—Ç—å Vision**: –í—Å–µ–≥–¥–∞ –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞—Ç—å—Å—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã, —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –∏ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤, –∏–∑–ª–æ–∂–µ–Ω–Ω—ã—Ö –≤ `docs/architecture/01-vision.md`.
2. **–õ–∞–∫–æ–Ω–∏—á–Ω–æ—Å—Ç—å –∏ —è—Å–Ω–æ—Å—Ç—å**: –ö–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —á–∏—Å—Ç—ã–º, —Ö–æ—Ä–æ—à–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∏ —Å–∞–º–æ–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–µ–º—ã–º. –ò–∑–±–µ–≥–∞—Ç—å –ª–∏—à–Ω–∏—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤.
3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –≤ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–µ**: –í—Å–µ–≥–¥–∞ –ø–æ–º–Ω–∏—Ç—å –æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞ –∏ —Ä–∞–±–æ—Ç–µ —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏.
4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞—Ç—å —Ä–µ—à–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –≤—ã—Å–æ–∫—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –ø—Ä–∏–Ω—Ü–∏–ø–∞–º–∏ Next.js App Router (–°–µ—Ä–≤–µ—Ä–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, Server Actions).

---

## üö® –°—Ç—Ä–æ–≥–∏–µ –∑–∞–ø—Ä–µ—Ç—ã (CRITICAL)

### ‚ùå **–ê–±—Å–æ–ª—é—Ç–Ω—ã–µ –∑–∞–ø—Ä–µ—Ç—ã**
1. **–ù–ò–ö–û–ì–î–ê –Ω–µ –∏–∑–º–µ–Ω—è—Ç—å `.env`**: –§–∞–π–ª `.env` –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ù–µ —á–∏—Ç–∞—Ç—å –∏ –Ω–µ –∏–∑–º–µ–Ω—è—Ç—å –µ–≥–æ.
2. **–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ —Ç–æ–ª—å–∫–æ –ø–æ –∫–æ–º–∞–Ω–¥–µ**: –ü—Ä–∏—Å—Ç—É–ø–∞—Ç—å –∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞ –º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —è–≤–Ω–æ–≥–æ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è –∏ –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã –Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é.
3. **–ù–∏–∫–∞–∫–∏—Ö –±–∏–Ω–∞—Ä–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤**: –ù–µ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –∏–∫–æ–Ω–∫–∏ (–∫—Ä–æ–º–µ SVG), –∞—Ä—Ö–∏–≤—ã –∏–ª–∏ –ª—é–±—ã–µ –¥—Ä—É–≥–∏–µ –Ω–µ—Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã.
4. **–ó–∞–ø—Ä–µ—Ç –ø—Ä—è–º—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –æ–∫—Ä—É–∂–µ–Ω–∏—è**: –ù–ò–ö–û–ì–î–ê –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `process.env.K_SERVICE` –Ω–∞–ø—Ä—è–º—É—é –≤ –∫–æ–¥–µ ‚Äî —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π helper.

---

## üåç Environment & Configuration

**–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π helper (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):**
```ts
// src/lib/env.ts
export const isCloud = (): boolean => Boolean(process.env.K_SERVICE);
export const isLocal = (): boolean => !isCloud();
```

**–ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–±–æ—Ç—ã —Å –æ–∫—Ä—É–∂–µ–Ω–∏–µ–º:**
- ‚úÖ –¢–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ `isLocal()` / `isCloud()` –≤–æ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö
- ‚ùå –ó–ê–ü–†–ï–¢ –Ω–∞ `process.env.K_SERVICE` –Ω–∞–ø—Ä—è–º—É—é –≤ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–µ
- ‚ùå –ù–ò–ö–û–ì–î–ê –Ω–µ –∏–∑–º–µ–Ω—è—Ç—å `.env` —Ñ–∞–π–ª
- ‚úÖ `.env.local` ‚Äî –º–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ –¥–ª—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤
- ‚úÖ Production —Å–µ–∫—Ä–µ—Ç—ã ‚Äî —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Google Secret Manager
- ‚úÖ –í CI ‚Äî —á–µ—Ä–µ–∑ secret injection
- ‚ùå –ù–∏–∫–∞–∫–∏—Ö plain text –ø–∞—Ä–æ–ª–µ–π/–∫–ª—é—á–µ–π –≤ –∫–æ–¥–µ –∏ –ª–æ–≥–∞—Ö

---

## üßº Code Quality & Technical Debt

### "–ü—Ä–∞–≤–∏–ª–æ –±–æ–π—Å–∫–∞—É—Ç–∞" (The Boy Scout Rule) ‚Äî –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ö –ò–°–ü–û–õ–ù–ï–ù–ò–Æ

> "Always leave the campground cleaner than you found it."

**–ü—Ä–∏–Ω—Ü–∏–ø:** –ö–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –≤—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ —Å —Ñ–∞–π–ª–æ–º (–¥–ª—è –ª—é–±–æ–π –∑–∞–¥–∞—á–∏), –≤—ã –æ–±—è–∑–∞–Ω—ã –æ—Å—Ç–∞–≤–∏—Ç—å –µ–≥–æ –≤ –ª—É—á—à–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏, —á–µ–º –æ–Ω –±—ã–ª –¥–æ –≤–∞—Å.

**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**
- **–ò—Å–ø—Ä–∞–≤–ª—è–π—Ç–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ª–∏–Ω—Ç–µ—Ä–∞:** –ï—Å–ª–∏ ESLint –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ—Ç `any`, `unused-vars`, `let` –≤–º–µ—Å—Ç–æ `const` ‚Äî –∏—Å–ø—Ä–∞–≤—å—Ç–µ —ç—Ç–æ.
- **–£–ª—É—á—à–∞–π—Ç–µ —á–∏—Ç–∞–µ–º–æ—Å—Ç—å:** –ü–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é, —á—Ç–æ–±—ã –æ–Ω–∞ –±—ã–ª–∞ –ø–æ–Ω—è—Ç–Ω–µ–µ, –∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–π —Ç–∏–ø.
- **–ù–µ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –Ω–æ–≤—ã–π –¥–æ–ª–≥:** –í–µ—Å—å –Ω–æ–≤—ã–π –∫–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —á–∏—Å—Ç—ã–º –∏ —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–º.

–≠—Ç–æ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á –Ω–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥, –∞ —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã.

**–ü–æ–ª–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è, —Å–ø–∏—Å–æ–∫ —Ç–µ–∫—É—â–∏—Ö –ø—Ä–æ–±–ª–µ–º –∏ –º–µ—Ç—Ä–∏–∫–∏ –æ–ø–∏—Å–∞–Ω—ã –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ –ø–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–º—É –¥–æ–ª–≥—É.**

‚û°Ô∏è **–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ —Å–º. –≤:** `docs/architecture/03-technical-debt.md`

---

## ü§ñ AI-generated Code Rules

**–°—Ç—Ä–æ–≥–∏–π workflow (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç):**

### –ü–µ—Ä–µ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –∫–æ–¥–∞:
1. ‚úÖ –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è (–æ–ø–∏—Å–∞–Ω–∏–µ + —Å—Å—ã–ª–∫–∞ –Ω–∞ issue)
2. ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —è–≤–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã "–º–æ–∂–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥"
3. ‚úÖ –ü–æ–Ω–∏–º–∞–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

### –í–æ –≤—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:
4. ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è unit —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –Ω–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π (–ø–æ–∫—Ä—ã—Ç–∏–µ ‚â•80%)
5. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (`README.md`/`docs/`) –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
6. ‚úÖ –°–æ–±–ª—é–¥–µ–Ω–∏–µ –≤—Å–µ—Ö –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª

### –ü–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:
7. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ ESLint + TypeScript + —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
8. ‚úÖ –ü–æ–º–µ—Ç–∫–∞ PR: `ai-generated: true` + –º–æ–¥–µ–ª—å (gpt-4, claude-3.5, etc.)
9. ‚úÖ –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ PR template —Å –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π
10. ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π human review + approve –æ—Ç senior –∏–Ω–∂–µ–Ω–µ—Ä–∞

### –ó–∞–ø—Ä–µ—â–µ–Ω–æ AI:
- ‚ùå –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (`.yaml`, `.json` configs)
- ‚ùå –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤ –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚ùå Merge –±–µ–∑ human approve
- ‚ùå –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–∏–Ω–∞—Ä–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (—Å—Ç—Ä–æ–≥–æ –ø–æ `01-vision.md`)

### –¢—Ä–µ—Ö—Å–ª–æ–π–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:
1. **UI Layer**: React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ `/components`
2. **Actions & Services Layer**: Server Actions –∏ —Å–µ—Ä–≤–∏—Å—ã –≤ `/src/lib/services`
3. **Data Access Layer**: Database queries –∏ –≤–Ω–µ—à–Ω–∏–µ API

### –ü—Ä–∞–≤–∏–ª–∞:
- ‚úÖ UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ù–ï –¥–æ–ª–∂–Ω—ã –Ω–∞–ø—Ä—è–º—É—é –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –ë–î
- ‚úÖ –í—Å—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –≤ Server Actions –∏ —Å–µ—Ä–≤–∏—Å–∞—Ö
- ‚úÖ Server Components by default, Client Components ‚Äî —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:
```
/components/ui/          # ShadCN UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
/components/features/    # –ë–∏–∑–Ω–µ—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã  
/lib/hooks/             # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ö—É–∫–∏
/lib/services/          # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏ API calls
```

---

## üé® UI/UX Rules

### –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):
- ‚úÖ **–¢–æ–ª—å–∫–æ ShadCN UI** –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (`/components/ui`) –≤–µ–∑–¥–µ, –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
- ‚úÖ **Tailwind CSS** —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –∏–∑ `globals.css`
- ‚úÖ **–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ —Ü–≤–µ—Ç–∞**: `text-destructive` –≤–º–µ—Å—Ç–æ `text-red-500`
- ‚ùå –ó–ê–ü–†–ï–¢ –∂–µ—Å—Ç–∫–æ –∑–∞–¥–∞–Ω–Ω—ã—Ö —Ü–≤–µ—Ç–æ–≤

### –ò–∫–æ–Ω–∫–∏:
- ‚úÖ **–¢–æ–ª—å–∫–æ lucide-react**: `import { IconName } from "lucide-react"`
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è**: –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∏–∫–æ–Ω–∫–∞ –µ—Å—Ç—å –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
- ‚ùå –ù–∏–∫–∞–∫–∏—Ö –¥—Ä—É–≥–∏—Ö –∏–∫–æ–Ω–æ—á–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫

---

## üìä Data & Types

### TypeScript (—Å—Ç—Ä–æ–≥–æ):
- ‚úÖ **–í—Å–µ–≥–¥–∞ TypeScript** ‚Äî –Ω–∏–∫–∞–∫–∏—Ö any
- ‚úÖ **–ö–ª—é—á–µ–≤—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏** (Product, Order, Category) –∏–∑ `src/lib/types.ts`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö

### Mock Data Pattern:
```ts
// –í –∫–∞–∂–¥–æ–º —Å–µ—Ä–≤–∏—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º–æ–∫–æ–≤
export async function getProducts(): Promise<Product[]> {
  if (isLocal()) {
    return mockProducts; // –∏–∑ src/lib/mock-data.ts
  }
  
  // —Ä–µ–∞–ª—å–Ω—ã–π API call
  return await db.products.findMany();
}
```

**–ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è Mock –¥–∞–Ω–Ω—ã—Ö:**
- ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `isLocal()` —Ä–µ–∂–∏–º–∞ –≤–æ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö
- ‚úÖ Mock-–¥–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–º–∏ –∏ –ø–æ–ª–Ω—ã–º–∏
- ‚úÖ –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π ‚Äî –æ–±–Ω–æ–≤–ª—è—Ç—å –º–æ–∫–∏ –≤ `src/lib/mock-data.ts`

---

## üì¶ Import Rules (client/server split)

### ESLint –ø—Ä–∞–≤–∏–ª–æ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):
```json
"no-restricted-imports": ["error", {
  "patterns": [
    {
      "group": ["@/lib/server-*", "**/server-*"], 
      "message": "Server-only modules are forbidden in client code"
    }
  ]
}]
```

### –ü—Ä–∞–≤–∏–ª–∞ –∏–º–ø–æ—Ä—Ç–∞:
- ‚úÖ Server –∫–æ–¥ ‚Üí —Ç–æ–ª—å–∫–æ –≤ `src/lib/server-*`
- ‚ùå Client –∫–æ–¥ –ù–ï –ú–û–ñ–ï–¢ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ –º–æ–¥—É–ª–∏
- ‚úÖ –û–±—â–∏–π –∫–æ–¥ ‚Üí –≤ `src/lib/` (–±–µ–∑ –ø—Ä–µ—Ñ–∏–∫—Å–∞ server-)

---

## üìã Logging Rules

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã:
```ts
// –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–¥
import { logger } from \'@/lib/logger\';
const log = logger.withCategory(\'COMPONENT_NAME\');

// –°–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–æ–¥  
import { serverLogger } from \'@/lib/server-logger\';
const log = serverLogger.withCategory(\'SERVICE_NAME\');
```

### –ü—Ä–∞–≤–∏–ª–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:
- ‚úÖ **–í—Å–µ–≥–¥–∞** —Å–æ–∑–¥–∞–≤–∞—Ç—å –ª–æ–≥–≥–µ—Ä—ã —Å –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–º–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
- ‚úÖ **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏** –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ
- ‚úÖ –ü—Ä–æ–∫–∏–¥—ã–≤–∞—Ç—å `requestId` —á–µ—Ä–µ–∑ middleware (–¥–ª—è –±—É–¥—É—â–µ–≥–æ)
- ‚ùå **–ù–ò–ö–û–ì–î–ê** `console.log` –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
- ‚ùå **–ù–ò–ö–û–ì–î–ê** –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å PII/—Å–µ–∫—Ä–µ—Ç—ã

---

## üß™ Testing Rules

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- ‚úÖ **Unit-—Ç–µ—Å—Ç—ã** –¥–ª—è –Ω–æ–≤–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- ‚úÖ **–ü–æ–∫—Ä—ã—Ç–∏–µ –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ ‚â•80%**, –æ–±—â–µ–µ ‚â•60%
- ‚úÖ **Integration tests** –¥–ª—è —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è (—Å mock DB)
- ‚úÖ **E2E smoke-—Ç–µ—Å—Ç—ã** –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ (auth, payment, checkout)

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:
- **Unit**: Vitest / Jest –¥–ª—è TypeScript
- **E2E**: Playwright  
- **Coverage**: –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

### CI Requirements:
- ‚ùå **CI –±–ª–æ–∫–∏—Ä—É–µ—Ç merge** –±–µ–∑ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –Ω–æ–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏: `typecheck OK` + `tests passed`

---

## üîê Security & Secrets

### –°–µ–∫—Ä–µ—Ç—ã:
- ‚ùå **–ù–ò–ö–û–ì–î–ê** –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º **Google Secret Manager** –¥–ª—è production
- ‚úÖ –õ–æ–∫–∞–ª—å–Ω–æ ‚Äî —Ç–æ–ª—å–∫–æ `.env.local` –¥–ª—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤
- ‚úÖ **SCA scanning**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π Snyk/Dependabot –≤ CI
- ‚ùå –ë–ª–æ–∫ –Ω–∞ merge –ø—Ä–∏ —É—è–∑–≤–∏–º–æ—Å—Ç—è—Ö –≤—ã—Å–æ–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:
- ‚ùå **–ù–µ –≥–ª–æ—Ç–∞—Ç—å –æ—à–∏–±–∫–∏** ‚Äî –≤—Å–µ–≥–¥–∞ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—É—é –æ—à–∏–±–∫—É
- ‚úÖ –î–ª—è –≤–Ω–µ—à–Ω–∏—Ö API ‚Äî retry —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
- ‚úÖ –î–ª—è –ø–ª–∞—Ç–µ–∂–µ–π ‚Äî –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –∏ circuit breaker

---

## üóÑ Database & Migrations  

### –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–±–æ—Ç—ã —Å –ë–î:
- ‚úÖ **–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ö–µ–º—ã** ‚Äî —á–µ—Ä–µ–∑ –º–∏–≥—Ä–∞—Ü–∏–∏ (Prisma Migrate)
- ‚ùå **–ó–ê–ü–†–ï–¢** –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–∞–±–ª–∏—Ü –≤ –∫–æ–¥–µ –±–µ–∑ –º–∏–≥—Ä–∞—Ü–∏–∏
- ‚úÖ **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
- ‚úÖ –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ: `migrations/` –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —á–∞—Å—Ç—å PR

---

## üìù PR & Commit Rules

### PR Template (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π):
\`\`\`markdown
## üìã –û–ø–∏—Å–∞–Ω–∏–µ
–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π.

## üîó Issue  
Closes: #ISSUE_NUMBER

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ
- –ü—É–Ω–∫—Ç 1
- –ü—É–Ω–∫—Ç 2

## üß™ –ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
1. –®–∞–≥ 1
2. –®–∞–≥ 2

## ‚öôÔ∏è Checklist
- [ ] ‚úÖ ESLint –ø—Ä–æ–π–¥–µ–Ω
- [ ] ‚úÖ TypeScript build —É—Å–ø–µ—à–µ–Ω  
- [ ] ‚úÖ Unit tests –Ω–∞–ø–∏—Å–∞–Ω—ã –∏ –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] ‚úÖ Integration tests (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)
- [ ] ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [ ] ü§ñ `ai-generated: yes/no` + –º–æ–¥–µ–ª—å

## üö® Risks & Breaking Changes
–û–ø–∏—Å–∞—Ç—å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —Ä–∏—Å–∫–∏ –∏ breaking changes.
\`\`\`

### Commit Message Format:
```
type(scope): subject

feat(products): add weight category handling
fix(ui): correct button padding in mobile
docs(readme): update installation guide  
test(services): add unit tests for payment flow
```

**Types:** `feat`, `fix`, `docs`, `test`, `refactor`, `perf`, `chore`

---

## üö¶ Implementation Roadmap

### üü¢ Phase 1 (–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ - —ç—Ç–∞ –Ω–µ–¥–µ–ª—è):
- [x] Env helper (`src/lib/env.ts`)
- [x] ESLint import restrictions
- [x] AI-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ–∫–ª–∏—Å—Ç  
- [x] PR template
- [x] Commit message rules
- [x] Updated conventions.md

### üü° Phase 2 (1-2 –Ω–µ–¥–µ–ª–∏):
- [ ] Pre-commit hooks (lint-staged + ESLint + Prettier)
- [ ] Unit tests baseline + coverage requirements
- [ ] Mock data rules enforcement
- [ ] Basic CI pipeline (lint + typecheck + tests)

### üî¥ Phase 3 (1 –º–µ—Å—è—Ü):
- [ ] Full CI/CD pipeline  
- [ ] Security scanning (Snyk/Dependabot)
- [ ] E2E testing infrastructure
- [ ] Database migration rules
- [ ] Performance monitoring

---

## üìö Quick Reference

### üîç Checklist –¥–ª—è —Ä–µ–≤—å—é PR:
- [ ] –°–ª–µ–¥—É–µ—Ç –ª–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –∏–∑ vision.md?
- [ ] –ï—Å—Ç—å –ª–∏ —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–∏?
- [ ] –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã (client/server)?
- [ ] –ü—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –ª–∏ ShadCN UI + —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ —Ü–≤–µ—Ç–∞?
- ] –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ª–∏ –∫–æ–¥ isLocal() —Ä–µ–∂–∏–º?
- [ ] –õ–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏?
- [ ] AI-–∫–æ–¥ –ø—Ä–æ–º–∞—Ä–∫–∏—Ä–æ–≤–∞–Ω –∏ –µ—Å—Ç—å human approve?

### üö® Red Flags (–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å merge):
- ‚ùå –ü—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `process.env.K_SERVICE`
- ‚ùå –ò–º–ø–æ—Ä—Ç server –º–æ–¥—É–ª–µ–π –≤ client –∫–æ–¥–µ  
- ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –Ω–æ–≤–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- ‚ùå Hardcoded —Ü–≤–µ—Ç–∞ –≤–º–µ—Å—Ç–æ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏—Ö
- ‚ùå AI-–∫–æ–¥ –±–µ–∑ human review
- ‚ùå –°–µ–∫—Ä–µ—Ç—ã –≤ –∫–æ–¥–µ –∏–ª–∏ –ª–æ–≥–∞—Ö
- ‚ùå –ò–∑–º–µ–Ω–µ–Ω–∏–µ .env —Ñ–∞–π–ª–∞

---

*–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç ‚Äî –∂–∏–≤–æ–π. –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ –º–µ—Ä–µ —Ä–∞–∑–≤–∏—Ç–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è —Ñ–∏–¥–±–µ–∫–∞ –æ—Ç –∫–æ–º–∞–Ω–¥—ã.*

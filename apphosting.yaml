# Settings to manage and configure a Firebase App Hosting backend.
# https://firebase.google.com/docs/app-hosting/configure

# Specifies the node version to use.
runtime: nodejs20

# This specifies that this backend needs access to Cloud SQL.
cloudsql:
  # The instance connection name can be found on the Cloud SQL instance overview page.
  instances:
    - fastbasket:europe-west10:delivery

# Non-secret environment variables.
# These values are available during both build and runtime.
environmentVariables:
  NEXT_PUBLIC_LOG_LEVEL: debug
  LOG_FORMAT: text
  NEXT_PUBLIC_S3_PUBLIC_URL: https://storage.googleapis.com/fastbasket-images
  K_SERVICE: 'fastbasket'
  CLOUD_SQL_CONNECTION_NAME: 'fastbasket:europe-west10:delivery'
  S3_BUCKET_NAME: 'fastbasket-images'
  S3_ENDPOINT_URL: 'https://storage.googleapis.com'
  S3_REGION: 'europe-west10'

# Environment variables that are populated from Secret Manager secrets.
secretEnvironmentVariables:
  - key: PG_USER
    secret: PG_USER
  - key: PG_PASSWORD
    secret: PG_PASSWORD
  - key: PG_DATABASE
    secret: PG_DATABASE
  - key: S3_ACCESS_KEY_ID
    secret: S3_ACCESS_KEY_ID
  - key: S3_SECRET_ACCESS_KEY
    secret: S3_SECRET_ACCESS_KEY
